<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <title>Accessing an Ethereum Provider | Status</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://dev.status.im/developer_tools/access_eth_provider.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://dev.status.im/developer_tools/access_eth_provider.html">
    
      <link rel="alternative" hreflang="es" href="https://dev.status.im/es/developer_tools/access_eth_provider.html">
    
      <link rel="alternative" hreflang="ko" href="https://dev.status.im/ko/developer_tools/access_eth_provider.html">
    
  
  <!-- Icon -->
  <link rel="icon" type="image/png" href="/img/logo-16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/img/logo-32.png" sizes="32x32">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76.png?v=0.0.5">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120.png?v=0.0.5">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152.png?v=0.0.5">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon-180.png?v=0.0.5">
  <link rel="apple-touch-icon" href="/img/apple-touch-icon-1024.png?v=0.0.5">
  <link rel="stylesheet" href="/css/main.min.css">
  <link rel="alternate" href="/atom.xml" title="Status">
  <meta property="og:image" content="/img/share.png">
  <meta property="og:title" content="Status, a Mobile Client for Ethereum 2.0">
</head>

<body>
  <div id="container">
    
      <div class="header">
    <div class="header-left">
        <a class="logo" href="/"></a>
        
    </div>
    <div class="header-right">
        <a href="https://get.status.im/chat/public/status" class="button">Join Status Chat</a>
    </div>
</div>

<div class="mobile-nav-wrap">
    <div class="mobile-nav-inner">
        <a class="logo" href="/"></a>
        <a class="icon-close mobile-nav-close" href="#"></a>
        <ul class="mobile-nav">
            <li><a href="https://our.status.im/">Blog</a></li>
            <li><a href="/docs">Docs</a></li>
            <li class="item--dropdown item--to-show">
              <span>Projects</span>
              <ul class="mobile-sub-nav">
                <li><a href="https://incubate.status.im/" class="">Incubate</a></li>
                <li><a href="https://nimbus.status.im/" class="">Nimbus</a></li>
                <li><a href="https://embark.status.im/" class="">Embark</a></li>
                <li><a href="https://studio.status.im/" class="">Studio</a></li>
                <li><a href="https://hardwallet.status.im/" class="">Hardwallet</a></li>
              </ul>
            </li>
            <li><a href="/contribute" class="">Contribute</a></li>
        </ul>
        <div class="mobile-nav-footer">
            <a href="https://get.status.im/chat/public/status" class="button button--blue">Join Status Chat</a>
        </div>
    </div>
    <div class="mobile-nav-overlay"></div>
</div>

<div class="popup-wrap popup-wrap--community">
    <div class="popup popup--community">
        <a class="popup__button popup__button--close"></a>
        <h3 class="popup__title">Community</h3>
        <div class="popup__inner">
            <div class="cards cards--three cards--three--even cards--community cards--community--light">
                <div class="card">
                    <a href="https://get.status.im/chat/public/status" class="card-inner">
                        <div class="community-icon community-icon--join"></div>
                        <h4>Join the chat in Status</h4>
                        <p class="secondary-text">Whisper sweet, encrypted nothings on a distributed network that no-one owns.</p>
                    </a>
                </div>
                <div class="card">
                    <a href="https://discuss.status.im/" class="card-inner">
                        <div class="community-icon community-icon--discussion"></div>
                        <h4>Join the Discussion</h4>
                        <p class="secondary-text">Join longer discussions, work in progress, and our research here.</p>
                    </a>
                </div>
                <div class="card">
                    <a href="https://github.com/status-im/" class="card-inner">
                        <div class="community-icon community-icon--contrubute"></div>
                        <h4>Contribute to our Repos</h4>
                        <p class="secondary-text">Help us #buidl the future by getting involved in the most active code base in Ethereum.</p>
                    </a>
                </div>
            </div>
            <h5>Find Out More</h5>
            <div class="cards cards-community-more cards--three cards--three--even">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <div class="latest-posts"></div>
                        </div>
                        <div class="card-community-more__link"><a href="https://our.status.im/" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Life at Status</h4>
                            <p class="secondary-text">What's it like to live the decentralized lifestyle? Find out here.</p>
                        </div>
                        <div class="card-community-more__link"><a href="/contribute" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Follow us on Twitter</h4>
                            <p class="secondary-text">Join the conversation on our social channels to learn more.</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://twitter.com/ethstatus/" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="popup-overlay"></div>
</div>

<div class="popup-wrap popup-wrap--projects">
    <div class="popup popup--projects">
        <a class="popup__button popup__button--close"></a>
        <h3 class="popup__title">Projects</h3>
        <div class="popup__inner">
            <h5>Help us #buidl</h5>
            <div class="cards cards-community-more cards--three cards--three--even">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Embark</h4>
                            <p class="secondary-text">Embark is a simple and easy to use development framework that enables you to build and deploy your own decentralized applications smoothly.</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://embark.status.im/" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Nimbus</h4>
                            <p class="secondary-text">A research project and light client for Ethereum 2.0 designed to perform well on embedded systems and resource-restricted hardware.</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://nimbus.status.im" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Status Studio</h4>
                            <p class="secondary-text">Studio is an integrated developer environment and educational platform designed to be a one-stop-shop for ÐApp development.</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://studio.status.im" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
            </div>
            <div class="separator"></div>
            <h5>Tools for Everyone</h5>
            <div class="cards cards-community-more cards--three cards--three--even">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Incubate</h4>
                            <p class="secondary-text">Incubate supports open source, early stage startups with funding, technical mentorship, legal and regulatory compliance and much more.</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://incubate.status.im/" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-inner">
                        <div class="card-content">
                            <h4>Status Hardwallet</h4>
                            <p class="secondary-text">A hardware wallet in the form of a card with a safe, contactless transaction experience</p>
                        </div>
                        <div class="card-community-more__link"><a href="https://hardwallet.status.im/" class="link-arrow">Learn more</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="popup-overlay"></div>
</div>

    
    <div class="page-intro wrapper">
  <header class="article-header">
    <h1 class="article-title" itemprop="name">Accessing an Ethereum Provider</h1>
    <a href="https://github.com/status-im/docs.status.im/edit/develop/source/developer_tools/access_eth_provider.md" class="article-edit-link" title="Improve this doc">Edit on Github</a>
  </header>
</div>
<div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <aside id="sidebar" role="navigation">
  <div class="inner">
    <strong class="sidebar-title">Web3 For Everyone</strong><a href="index.html" class="sidebar-link">Status Developer Tools</a><strong class="sidebar-title">Connecting to web3</strong><a href="access_eth_provider.html" class="sidebar-link current">Accessing Web3 Providers</a><a href="detecting_status.html" class="sidebar-link">Detecting Status</a><strong class="sidebar-title">Optimizing for Mobile</strong><a href="assets_guidelines.html" class="sidebar-link">Assets and Guidelines</a><a href="status_web_api.html" class="sidebar-link">JavaScript API</a><a href="http_debugging.html" class="sidebar-link">How to Test & Debug</a><strong class="sidebar-title">Submitting Your DApp</strong><a href="add_your_dapp.html" class="sidebar-link">How To Submit</a><a href="troubleshooting_dapps.html" class="sidebar-link">Troubleshooting</a><strong class="sidebar-title">Adapt Status To Your Needs</strong><a href="enable_chat.html" class="sidebar-link">Add Your Own Chat</a><a href="add_your_own_network.html" class="sidebar-link">Add Your Own Network</a><strong class="sidebar-title">Extensions [WIP]</strong><a href="../extensions/" class="sidebar-link">Introduction</a><strong class="sidebar-title">Fiddle</strong><a href="/fiddle/" class="sidebar-link">Status Fiddle</a><strong class="sidebar-title">Storybook</strong><a href="https://status-im.github.io/storybook/" class="sidebar-link">Status React Storybook</a>
  </div>
</aside>
      <article class="article-container" itemscope="" itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <div class="article-content" itemprop="articleBody">
                <h1 id="The-Decentralized-Web-Awaits-You…" class="article-heading"><a href="#The-Decentralized-Web-Awaits-You…" class="headerlink" title="The Decentralized Web Awaits You…"></a>The Decentralized Web Awaits You…<a class="article-anchor" href="#The-Decentralized-Web-Awaits-You…" aria-hidden="true"></a></h1><p>The pattern of full provider auto-injection followed by the previous generation of Ethereum-enabled DOM environments fails to protect user privacy and fails to ensure a safe user experience: untrusted websites can both view account information and arbitrarily initiate transactions on a user’s behalf. Even though most users may reject unsolicited transactions on untrusted websites, a protocol for provider exposure should make such unsolicited requests impossible.</p>
<p>In order to access an Ethereum provider (especially after November 2, 2018), you will need to request permission from the user, rather than automatically injecting <code>web3</code> into the page.</p>
<p>You can read the full rationale on <a href="https://our.status.im/breaking-change-to-the-status-browser/" target="_blank" rel="noopener">our blog</a>.</p>
<h3 id="Include-the-web3-js-Library-in-Your-Project" class="article-heading"><a href="#Include-the-web3-js-Library-in-Your-Project" class="headerlink" title="Include the web3.js Library in Your Project"></a>Include the web3.js Library in Your Project<a class="article-anchor" href="#Include-the-web3-js-Library-in-Your-Project" aria-hidden="true"></a></h3><p>This can be done different ways depending on the structure of your project and the flavour of JS you happen to be using. Most often it looks something like this:</p>
<p><code>import Web3 from &#39;web3&#39;</code></p>
<h3 id="Create-a-New-Web3-Object" class="article-heading"><a href="#Create-a-New-Web3-Object" class="headerlink" title="Create a New Web3 Object"></a>Create a New Web3 Object<a class="article-anchor" href="#Create-a-New-Web3-Object" aria-hidden="true"></a></h3><p>After importing <code>Web3</code> from the library you’re using, you need to make sure it is instantiated for that page/app:</p>
<p><code>web3 = new Web3(ethereum)</code></p>
<h3 id="Request-Full-Access-to-the-Provider" class="article-heading"><a href="#Request-Full-Access-to-the-Provider" class="headerlink" title="Request Full Access to the Provider"></a>Request Full Access to the Provider<a class="article-anchor" href="#Request-Full-Access-to-the-Provider" aria-hidden="true"></a></h3><pre><code class="js">window.addEventListener(&#39;load&#39;, async () =&gt; {
    // Read-only provider is exposed by default
    console.log(await ethereum.send(&#39;net_version&#39;));
    try {
        // Request full provider if needed
        await ethereum.enable();
        // Full provider exposed
    } catch (error) {
        // User denied full provider access
    }
});
</code></pre>
<p>Note the read-only provider in the first line, which is exposed by default. Accessing the user’s address and initiating transactions or signing messages requires the <code>ethereum.enable()</code> call to be accepted by the user.</p>
<p>Further details around the structure we have all settled on together can be found in <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1102.md" target="_blank" rel="noopener">EIP 1102</a>.</p>
<h3 id="Setting-the-default-account" class="article-heading"><a href="#Setting-the-default-account" class="headerlink" title="Setting the default account"></a>Setting the default account<a class="article-anchor" href="#Setting-the-default-account" aria-hidden="true"></a></h3><p>web3.js uses web3.eth.defaultAccount for any transaction that does not specify a <code>from</code>. In order to be able to create transactions, you must set a valid address. The following code can only be executed once <code>ethereum.enable();</code> has been executed successfully:</p>
<pre><code>web3.eth.getAccounts().then(accounts =&gt; {
    web3.eth.defaultAccount = accounts[0];
});
</code></pre><h3 id="Using-Web3-Rather-Than-the-Provider" class="article-heading"><a href="#Using-Web3-Rather-Than-the-Provider" class="headerlink" title="Using Web3 Rather Than the Provider"></a>Using Web3 Rather Than the Provider<a class="article-anchor" href="#Using-Web3-Rather-Than-the-Provider" aria-hidden="true"></a></h3><p>You can see that the EIP suggests using <code>await ethereum.send(&#39;eth_sendTransaction&#39;, [/* ... */]);</code>, after being granted full access, but we feel this is likely confusing. Most developers already use web3 when sending transactions (of any kind - i.e. it could be <code>web3.eth.defaultBlock</code> or <code>web3.eth.estimateGas</code> etc.).</p>
<p>This is why we suggest importing web3 from the appropriate library for your Dapp, instantiating it, adding the new provider block above, and then handling transactions through web3 as your normally would before the November 2, 2018 breaking changes.</p>
<p>This works exactly like it always has:</p>
<p><code>web3.eth.sendTransaction(transactionObject)</code></p>
<p>Constructing the transactionObject is, again, heavily dependent on what you’re trying to do, but here is a super simple example of what it might look like if you just plugged the required values straight in:</p>
<pre><code>// using web3.js 1.0.0-beta
web3.eth.sendTransaction({
    from: web3.eth.defaultAccount,
    to: &#39;0x11f4d0A3c12e86B4b5F39B213F7E19D048276DAe&#39;,
    value: &#39;1000000000000000&#39;,
    gas: gasLimit // use web3.eth.estimateGas() to get this amount, and add a little for extra safety.
}).then(receipt =&gt; {
    console.log(receipt.transactionHash); // &quot;0xe7991ac8107a2dd70f996ea0cd867a828b2f228b39436506271d6a53587eff16&quot;
}).catch(function(err){
    console.error(err);
});
</code></pre>
              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2018-11-17T09:48:12.029Z" itemprop="dateModified">Last updated: 2018-11-17</time>
                <a href="index.html" class="article-footer-prev" title="Status Developer Tools"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="detecting_status.html" class="article-footer-next" title="Detecting Status"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>
</div>

    
      
    
  </div>
  
</body>
</html>
